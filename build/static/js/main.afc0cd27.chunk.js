(this.webpackJsonpsmart_kitchen=this.webpackJsonpsmart_kitchen||[]).push([[0],{148:function(e){e.exports=JSON.parse('{"nav-dashboard":"DASHBOARD","something-went-wrong":"Something went wrong...","refresh":"REFRESH","connection-warning":"Hey, something isn\'t quite right! Check your connection.","notification-history":"Check notification history","no-new-notifications":"No new notifications","notifications":"Notifications","inactive":"Inactive","show-more-button":"SHOW MORE","unknown-sensor":"Unknown sensor"}')},149:function(e){e.exports=JSON.parse('{"sensors-placed":"Placed on the map","sensors-not-placed":"Not placed on the map","sensors-refresh-error":"Could not refresh sensors\' status.","map-modal-title":"Gap needed!","map-modal-content":"Leave a gap between sensors, please.","map-modal-close":"Close","sensor-remove-modal":"Removing sensor from the map","sensor-remove-modal-content":"Are you sure you want to remove the sensor from the map?","sensor-remove-cancel":"Cancel","sensor-remove-confirm":"Ok","stove-power":"Power","stove-timer":"Timer","watt":"Power consumption","stove-level":"Level","stove-uptime":"Uptime","stove-mode":"Mode","light-hue":"Hue","light-saturation":"Saturation","light-value":"Value","stove-last-action":"Last action:","smoke-detected":"SMOKE DETECTED","smoke-not-detected":"No smoke","window-open":"Open","window-closed":"Closed","blinds-position":"Position","temperature-sensor-name":"Temperature sensor","temperature":"Temperature","window-sensor-name":"Window sensor","window-sensor-desc":"Window","window-blind-name":"Window blind","window-blind-desc":"Window blind","stove-sensor-name":"Stove","stove-sensor-desc":"Stove","smoke-sensor-name":"Smoke sensor","smoke-sensor-desc":"Smoke sensor","RGB-light-name":"RGB light","RGB-light-desc":"Light","sensor-add-failed":"Sensor {{id}} could not be added.","sensor-remove-failed":"Error during removing sensor {{id}}","sensor-detail-confirm":"Confirm","sensor-detail-hide":"Hide"}')},150:function(e){e.exports=JSON.parse('{"nav-dashboard":"PANEL G\u0141\xd3WNY","nav-HVAC":"HVAC","nav-authors":"AUTORZY","something-went-wrong":"Co\u015b posz\u0142o nie tak...","refresh":"OD\u015aWIE\u017b","connection-warning":"Hej, co\u015b nie styka! Sprawd\u017a po\u0142\u0105czenie.","notification-history":"Zobacz histori\u0119 notyfikacji","no-new-notifications":"Brak nowych notyfikacji","notifications":"Notyfikacje","inactive":"Nieaktywne","show-more-button":"POKA\u017b WI\u0118CEJ","unknown-sensor":"Nieznany sensor"}')},151:function(e){e.exports=JSON.parse('{"sensors-placed":"Widoczne na mapie","sensors-not-placed":"Nieumieszczone na mapie","sensors-refresh-error":"Od\u015bwie\u017cenie stanu czujnik\xf3w nie powiod\u0142o si\u0119.","map-modal-title":"Potrzebny odst\u0119p!","map-modal-content":"Zostaw wi\u0119kszy odst\u0119p mi\u0119dzy sensorami.","map-modal-close":"Zamknij","sensor-remove-modal":"Usuni\u0119cie czujnika z mapy","sensor-remove-modal-content":"Czy na pewno chcesz usun\u0105\u0107 czujnik z mapy?","sensor-remove-cancel":"Anuluj","sensor-remove-confirm":"Potwierd\u017a","stove-power":"Power","stove-timer":"Timer","watt":"Watt","stove-level":"Level","stove-uptime":"Uptime","stove-mode":"Mode","light-hue":"Odcie\u0144","light-saturation":"Nasycenie","light-value":"Nat\u0119\u017cenie","stove-last-action":"Ostatnia akcja:","smoke-detected":"WYKRYTO DYM","smoke-not-detected":"Brak dymu","window-open":"Okno otwarte","window-closed":"Okno zamkni\u0119te","blinds-position":"Pozycja","temperature-sensor-name":"Czujnik temperatury","temperature":"Temperatura","window-sensor-name":"Czujnik okna","window-sensor-desc":"Okno","window-blind-name":"Rolety","window-blind-desc":"Rolety","stove-sensor-name":"Czujnik","stove-sensor-desc":"Czujnik","smoke-sensor-name":"Czujnik dymu","smoke-sensor-desc":"Czujnik dymu","RGB-light-name":"\u015awiat\u0142o RGB","RGB-light-desc":"\u015awiat\u0142o","sensor-add-failed":"Czujnik {{id}} nie zosta\u0142 dodany.","sensor-remove-failed":"B\u0142\u0105d przy usuwaniu czujnika {{id}}","sensor-detail-confirm":"Ustaw","sensor-detail-hide":"Hide"}')},181:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),i=n.n(o),s=n(17),c=(n(181),n(63)),u=n(26),d=(n(118),n(57)),l=n(152),b={data:{}};var p=n(8),j="SENSORS_LOAD_ACTION",O="SENSORS_FETCH_START",f="SENSORS_FETCH_SUCCESS",h="SENSORS_FETCH_FAIL",m="SENSORS_UPDATE_ACTION",v="SENSORS_UPDATE_START",x="SENSORS_UPDATE_SUCCESS",S="SENSORS_UPDATE_FAIL",g="LIST_CLICKED",w="MAP_CLICKED",E="POINT_CLICKED",y="DB_ADD_POINT",k="DB_ADD_POINT_START",C="DB_ADD_POINT_SUCCESS",N="DB_ADD_POINT_FAIL",_="DB_UPDATE_ADD_ERROR_POINTS",T="DB_UPDATE_REMOVE_ERROR_POINTS",R="DB_REMOVE_POINT",P="DB_REMOVE_POINT_START",I="DB_REMOVE_POINT_SUCCESS",D="DB_REMOVE_POINT_FAIL",L="SENSORS_REFRESH_ACTION",A="SENSORS_REFRESH_START",z="SENSORS_REFRESH_SUCCESS",H="SENSORS_REFRESH_FAIL",B="NOTIFICATIONS_FETCH_REQUEST",F="NOTIFICATIONS_FETCH_SUCCESS",U="NOTIFICATIONS_FETCH_FAIL",M="NOTIFICATIONS_CHECK",W="NOTIFICATIONS_CHECK_START",G="NOTIFICATIONS_CHECK_SUCCESS",V="NOTIFICATIONS_CHECK_FAIL",K="NOTIFICATIONS_UPDATE",q="NOTIFICATIONS_UPDATE_SUCCESS",J="NOTIFICATIONS_UPDATE_FAIL",X="NOTIFICATION_DRAWER_OPEN",Y="NOTIFICATION_DRAWER_CLOSE",Z="SENSOR_LIGHT_CHANGE_ACTION",$="SENSOR_LIGHT_CHANGE_START",Q="SENSOR_LIGHT_CHANGE_SUCCESS",ee="SENSOR_LIGHT_CHANGE_FAIL",te="SENSOR_WINDOW_BLINDS_CHANGE_ACTION",ne="SENSOR_WINDOW_BLINDS_CHANGE_START",re="SENSOR_WINDOWS_BLINDS_CHANGE_SUCCESS",ae="SENSOR_WINDOW_BLINDS_CHANGE_FAIL",oe="SENSOR_STOVE_CHANGE_ACTION",ie="SENSOR_STOVE_CHANGE_START",se="SENSOR_STOVE_CHANGE_SUCCESS",ce="SENSOR_STOVE_CHANGE_FAIL",ue={sensors:[],loadingSensors:!0,loadingError:null,sensorError:null,refreshError:null,lightDetailsError:null,windowBlindsDetailsError:null,stoveDetailsError:null,updateError:null,updating:0},de=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{loadingError:null,loadingSensors:!0})},le=function(e,t){var n={temperatureSensors:t.sensors.temperatureSensors,windowSensors:t.sensors.windowSensors,windowBlinds:t.sensors.windowBlinds,stoveSensors:t.sensors.stoveSensors,smokeSensors:t.sensors.smokeSensors,lights:t.sensors.lights};return Object(p.a)(Object(p.a)({},e),{},{sensors:n,loadingSensors:!1,refreshError:null})},be=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{updateError:null})},pe=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{sensors:t.sensors,updating:e.updating+1,updateError:!1})},je=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{updateError:!0})},Oe=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{loadingError:t.error,loadingSensors:!1})},fe=function(e,t){return Object(p.a)({},e)},he=function(e,t){var n={temperatureSensors:t.sensors.temperatureSensors,windowSensors:t.sensors.windowSensors,windowBlinds:t.sensors.windowBlinds,stoveSensors:t.sensors.stoveSensors,smokeSensors:t.sensors.smokeSensors,lights:t.sensors.lights};return Object(p.a)(Object(p.a)({},e),{},{sensors:n,refreshError:null,updating:0})},me=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{refreshError:t.error,updating:0})},ve=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{lightDetailsError:null})},xe=function(e,t){return Object(p.a)({},e)},Se=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{lightDetailsError:t.error})},ge=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{windowBlindsDetailsError:null})},we=function(e,t){return Object(p.a)({},e)},Ee=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{windowBlindsDetailsError:t.error})},ye=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{stoveDetailsError:null})},ke=function(e,t){return Object(p.a)({},e)},Ce=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{stoveDetailsError:t.error})};var Ne={listItemPressed:!1,mapPointPressed:!1,pressedItemId:void 0,waitingForSensorLocation:!1,sensorColor:void 0,sensorBorderColor:void 0,sensorData:void 0},_e=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{listItemPressed:!0,mapPointPressed:!1,waitingForSensorLocation:!t.isOnMap,pressedItemId:t.id,sensorColor:t.sensorColor,sensorBorderColor:void 0,sensorData:t.sensorData})},Te=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{listItemPressed:!1,mapPointPressed:!1,waitingForSensorLocation:!1,pressedItemId:void 0,sensorColor:void 0,sensorBorderColor:void 0,sensorData:t.sensorData})},Re=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{listItemPressed:!1,mapPointPressed:!0,waitingForSensorLocation:!1,pressedItemId:t.id,sensorBorderColor:t.sensorBorderColor})};var Pe=n(30),Ie={_id:0,type:"None",mapPosition:void 0,addingPoint:!1,addError:void 0,removeError:void 0,removeSuccess:!1,addErrorPoints:[],removeErrorPoints:[]},De=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{_id:t._id,type:t.sensorType,mapPosition:t.mapPosition,addingPoint:!0,addError:void 0,addErrorPoints:Array.from(new Set([].concat(Object(Pe.a)(e.addErrorPoints),[t._id])))})},Le=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{_id:t._id,type:t.sensorType,mapPosition:t.mapPosition,addingPoint:!1,addError:void 0,addErrorPoints:Object(Pe.a)(e.addErrorPoints.filter((function(e){return e!==t._id})))})},Ae=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{_id:t._id,type:"None",mapPosition:void 0,addingPoint:!1,addError:t.error,addErrorPoints:Object(Pe.a)(e.addErrorPoints)})},ze=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{addErrorPoints:Object(Pe.a)(e.addErrorPoints.filter((function(e){return e!==t._id})))})},He=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{_id:t._id,type:void 0,mapPosition:void 0,addingPoint:!1,removeError:void 0,removeSuccess:!1,removeErrorPoints:Array.from(new Set([].concat(Object(Pe.a)(e.removeErrorPoints),[t._id])))})},Be=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{_id:t._id,type:void 0,mapPosition:void 0,addingPoint:!1,removeError:void 0,removeSuccess:!0,removeErrorPoints:e.removeErrorPoints})},Fe=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{_id:t._id,type:"None",mapPosition:void 0,addingPoint:!1,removeError:t.error,removeSuccess:!1,removeErrorPoints:e.removeErrorPoints})},Ue=function(e,t){return Object(p.a)(Object(p.a)({},e),{},{removeErrorPoints:Object(Pe.a)(e.removeErrorPoints.filter((function(e){return e!==t._id})))})};var Me={notifications:[],fetchError:void 0,fetching:!1,isDrawerOpen:!1,updating:!1,updateError:void 0,checking:!1,notificationContent:void 0,checkError:void 0};var We=Object(d.b)({home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;return t.type,e},sensor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return de(e);case f:return le(e,t);case h:return Oe(e,t);case v:return be(e);case x:return pe(e,t);case S:return je(e);case A:return fe(e);case z:return he(e,t);case H:return me(e,t);case $:return ve(e);case Q:return xe(e);case ee:return Se(e,t);case ne:return ge(e);case re:return we(e);case ae:return Ee(e,t);case ie:return ye(e);case se:return ke(e);case ce:return Ce(e,t);default:return e}},mapListCommunication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g:return _e(e,t);case w:return Te(e,t);case E:return Re(e,t);default:return e}},dbInteraction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return De(e,t);case C:return Le(e,t);case N:return Ae(e,t);case _:return ze(e,t);case P:return He(e,t);case I:return Be(e,t);case D:return Fe(e,t);case T:return Ue(e,t);default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case B:return Object(p.a)(Object(p.a)({},e),{},{fetching:!0,fetchError:void 0});case F:return Object(p.a)(Object(p.a)({},e),{},{fetching:!1,notifications:t.notifications});case U:return Object(p.a)(Object(p.a)({},e),{},{fetching:!1,fetchError:t.error});case X:return Object(p.a)(Object(p.a)({},e),{},{isDrawerOpen:!0});case Y:return Object(p.a)(Object(p.a)({},e),{},{isDrawerOpen:!1});case M:return Object(p.a)(Object(p.a)({},e),{},{notificationContent:void 0,checkError:void 0,checking:!1});case W:return Object(p.a)(Object(p.a)({},e),{},{notificationContent:t.notification,checking:!0});case G:return Object(p.a)(Object(p.a)({},e),{},{notifications:t.notifications,checking:!1,checkError:void 0});case V:return Object(p.a)(Object(p.a)({},e),{},{notifications:t.notifications,checking:!1,checkError:t.error});case K:return Object(p.a)(Object(p.a)({},e),{},{updating:!0,updateError:void 0});case q:return Object(p.a)(Object(p.a)({},e),{},{updating:!1,notifications:t.notifications});case J:return Object(p.a)(Object(p.a)({},e),{},{updating:!1,updateError:t.error});default:return e}}}),Ge=n(10),Ve=n.n(Ge),Ke=n(9),qe=Ve.a.mark(Xe),Je=Ve.a.mark(Ye);function Xe(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Home loaded!");case 1:case"end":return e.stop()}}),qe)}function Ye(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.f)("HOME_LOADED_ACTION",Xe);case 2:case"end":return e.stop()}}),Je)}function Ze(){return{type:j}}function $e(e){return{type:m,sensors:e}}function Qe(e){return{type:f,sensors:e}}function et(e){return{type:z,sensors:e}}function tt(e){return{type:oe,stoveSensorDetails:e}}var nt=n(48),rt=n.n(nt),at={temperatureSensors:[{id:1,type:"TEMPERATURE_SENSOR",value:21},{id:9,type:"TEMPERATURE_SENSOR",value:22,mapPosition:{x:40,y:60}},{id:10,type:"TEMPERATURE_SENSOR",value:22,mapPosition:{x:77,y:56}},{id:11,type:"TEMPERATURE_SENSOR",value:24,mapPosition:{x:40,y:23}},{id:12,type:"TEMPERATURE_SENSOR",value:19.3,mapPosition:{x:0,y:0}},{id:13,type:"TEMPERATURE_SENSOR",value:21,mapPosition:void 0}],windowSensors:[{id:2,type:"windowSensor",status:"open"}],windowBlinds:[{id:3,type:"windowBlind",position:90}],stoveSensors:[{id:4,type:"stoveSensor",timer:{hour:0,min:1},temperature:150,watt:1300,uptime:0,power:!0,level:4,mode:"Hot Pot",overheat:!0}],smokeSensors:[{id:5,type:"smokeSensor",isSmokeDetected:!0},{id:12,type:"smokeSensor",isSmokeDetected:!0,mapPosition:{x:88,y:43}}],lights:[{id:6,type:"LED_CONTROLLER",hue:17,saturation:40,value:32}]},ot=Ve.a.mark(dt),it=Ve.a.mark(lt),st=Ve.a.mark(bt),ct=Ve.a.mark(pt),ut=Ve.a.mark(jt);function dt(){var e,t,n,r,a,o;return Ve.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e={headers:{"Content-Type":"application/json",Authorization:"secret"}},i.next=3,rt.a.post("https://it4735-group6-server.herokuapp.com/api/v1/admin/device",{type:"read"},e);case 3:for(t=i.sent,n={temperatureSensors:[],windowSensors:[],windowBlinds:[],stoveSensors:[],smokeSensors:[],lights:[]},r=t.data.devices,a=0;a<r.length;++a)0!=(o=r[a]).type&&"stoveSensor"!=o.sensorType||n.stoveSensors.push(Object(p.a)(Object(p.a)({},o),{},{type:"stoveSensor",timer:o.timer?o.timer:{hour:0,min:0},temperature:o.temperature?o.temperature:0,watt:o.watt?o.watt:0,uptime:o.uptime?o.uptime:0,power:!!o.power&&o.power,level:o.level?o.level:0,mode:o.mode?o.mode:"None",overheat:!!o.overheat&&o.overheat}));return i.abrupt("return",n);case 8:case"end":return i.stop()}}),ot)}function lt(){var e,t,n,r,a,o;return Ve.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e={headers:{"Content-Type":"application/json",Authorization:"secret"}},i.next=3,rt.a.post("https://it4735-group6-server.herokuapp.com/api/v1/admin/device",{type:"read"},e);case 3:for(t=i.sent,n={temperatureSensors:[],windowSensors:[],windowBlinds:[],stoveSensors:[],smokeSensors:[],lights:[]},r=t.data.devices,a=0;a<r.length;++a)0!=(o=r[a]).type&&"stoveSensor"!=o.sensorType||n.stoveSensors.push(Object(p.a)(Object(p.a)({},o),{},{type:"stoveSensor",timer:o.timer?o.timer:{hour:0,min:0},temperature:o.temperature?o.temperature:0,watt:o.watt?o.watt:0,uptime:o.uptime?o.uptime:0,power:!!o.power&&o.power,level:o.level?o.level:0,mode:o.mode?o.mode:"None",overheat:!!o.overheat&&o.overheat}));return i.abrupt("return",n);case 8:case"end":return i.stop()}}),it)}function bt(e){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{headers:{"Content-Type":"application/json"}},e.abrupt("return",at);case 2:case"end":return e.stop()}}),st)}function pt(e){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{headers:{"Content-Type":"application/json"}},e.abrupt("return",at);case 2:case"end":return e.stop()}}),ct)}function jt(e){var t,n;return Ve.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={headers:{"Content-Type":"application/json",Authorization:"secret"}},r.next=3,rt.a.post("https://it4735-group6-server.herokuapp.com/api/v1/admin/device",{type:"write",devices:[e]},t);case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),ut)}var Ot=Ve.a.mark(St),ft=Ve.a.mark(gt),ht=Ve.a.mark(wt),mt=Ve.a.mark(Et),vt=Ve.a.mark(yt),xt=Ve.a.mark(kt);function St(){var e;return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ke.d)({type:O});case 2:return t.prev=2,t.next=5,Object(Ke.b)(dt);case 5:return e=t.sent,t.next=8,Object(Ke.d)(Qe(e));case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(2),t.next=14,Object(Ke.d)((n=t.t0,{type:h,error:n}));case 14:case"end":return t.stop()}var n}),Ot,null,[[2,10]])}function gt(e){return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ke.d)({type:v});case 2:return t.prev=2,t.next=5,Object(Ke.d)((r=e.sensors,{type:x,sensors:r}));case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(2),t.next=11,Object(Ke.d)((n=t.t0,{type:S,error:n}));case 11:case"end":return t.stop()}var n,r}),ft,null,[[2,7]])}function wt(){var e,t;return Ve.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ke.d)({type:A});case 2:return n.next=5,Object(Ke.c)(3e3);case 5:return n.prev=5,n.next=8,Object(Ke.b)(lt);case 8:return e=n.sent,n.next=11,Object(Ke.e)();case 11:if(t=n.sent.sensor.updating,n.t0=0===t,!n.t0){n.next=16;break}return n.next=16,Object(Ke.d)(et(e));case 16:n.next=22;break;case 18:return n.prev=18,n.t1=n.catch(5),n.next=22,Object(Ke.d)((r=n.t1,{type:H,error:r}));case 22:n.next=2;break;case 24:case"end":return n.stop()}var r}),ht,null,[[5,18]])}function Et(e){return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ke.d)({type:$});case 2:return t.prev=2,t.next=5,Object(Ke.b)(bt,e.lightSensorDetails);case 5:return t.next=7,Object(Ke.d)({type:Q});case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(2),t.next=13,Object(Ke.d)((n=t.t0,{type:ee,error:n}));case 13:case"end":return t.stop()}var n}),mt,null,[[2,9]])}function yt(e){return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ke.d)({type:ne});case 2:return t.prev=2,t.next=5,Object(Ke.b)(pt,e.windowBlindsSensorDetails);case 5:return t.next=7,Object(Ke.d)({type:re});case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(2),t.next=13,Object(Ke.d)((n=t.t0,{type:ae,error:n}));case 13:case"end":return t.stop()}var n}),vt,null,[[2,9]])}function kt(e){return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ke.d)({type:ie});case 2:return t.prev=2,t.next=5,Object(Ke.b)(jt,e.stoveSensorDetails);case 5:return t.next=7,Object(Ke.d)({type:se});case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(2),t.next=13,Object(Ke.d)((n=t.t0,{type:ce,error:n}));case 13:case"end":return t.stop()}var n}),xt,null,[[2,9]])}var Ct=Ve.a.mark(Nt);function Nt(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.f)(j,St);case 2:return e.next=4,Object(Ke.f)(L,wt);case 4:return e.next=6,Object(Ke.f)(Z,Et);case 6:return e.next=8,Object(Ke.f)(te,yt);case 8:return e.next=10,Object(Ke.f)(oe,kt);case 10:return e.next=12,Object(Ke.f)(m,gt);case 12:case"end":return e.stop()}}),Ct)}function _t(e){return{type:k,_id:e._id,sensorType:e.sensorType,mapPosition:e.mapPosition}}function Tt(e){return{type:C,_id:e._id,sensorType:e.sensorType,mapPosition:e.mapPosition}}function Rt(e,t){return{type:N,_id:e._id,error:t}}function Pt(e){return{type:P,_id:e._id}}function It(e){return{type:I,_id:e._id}}function Dt(e,t){return{type:D,_id:e._id,error:t}}function Lt(e){return{type:T,_id:e}}var At=Ve.a.mark(Ht),zt=Ve.a.mark(Bt);function Ht(e){var t,n;return Ve.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={headers:{"Content-Type":"application/json",Authorization:"secret"}},r.next=3,rt.a.post("https://it4735-group6-server.herokuapp.com/api/v1/admin/device",{type:"write",devices:[{id:e._id,sensorType:e.sensorType,mapPosition:e.mapPosition}]},t);case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),At)}function Bt(e){var t,n;return Ve.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={headers:{"Content-Type":"application/json",Authorization:"secret"}},r.next=3,rt.a.post("https://it4735-group6-server.herokuapp.com/api/v1/admin/device",{type:"write",devices:[{id:e._id,sensorType:e.sensorType,mapPosition:{}}]},t);case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),zt)}var Ft=Ve.a.mark(Mt),Ut=Ve.a.mark(Wt);function Mt(e){return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ke.d)(_t(e));case 2:return t.prev=2,t.next=5,Object(Ke.b)((function(){return Ht(e)}));case 5:return t.next=7,Object(Ke.d)(Tt(e));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(2),t.next=13,Object(Ke.d)(Rt(e,t.t0));case 13:case"end":return t.stop()}}),Ft,null,[[2,9]])}function Wt(e){return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ke.d)(Pt(e));case 2:return t.prev=2,t.next=5,Object(Ke.b)((function(){return Bt(e)}));case 5:return t.next=7,Object(Ke.d)(It(e));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(2),t.next=13,Object(Ke.d)(Dt(e,t.t0));case 13:case"end":return t.stop()}}),Ut,null,[[2,9]])}var Gt=Ve.a.mark(Vt);function Vt(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.f)(y,Mt);case 2:return e.next=4,Object(Ke.f)(R,Wt);case 4:case"end":return e.stop()}}),Gt)}var Kt=Ve.a.mark(Jt),qt=Ve.a.mark(Xt);function Jt(){var e;return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt.a.get("/api/v1/notifications");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),Kt)}function Xt(e){var t;return Ve.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,rt.a.delete("/api/v1/notifications/".concat(e.id));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}),qt)}var Yt=function(e){return{type:M,id:e}},Zt=function(e){return{type:G,notifications:e}},$t=function(e,t){return{type:V,notifications:e,error:t}},Qt=Ve.a.mark(rn),en=Ve.a.mark(an),tn=Ve.a.mark(on),nn=function(e){return e.sort((function(e,t){return t.timestamp-e.timestamp}))};function rn(){var e;return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ke.b)(Jt);case 3:return e=t.sent,t.next=6,Object(Ke.d)((r=nn(e),{type:F,notifications:r}));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(Ke.d)((n=t.t0,{type:U,error:n}));case 12:case"end":return t.stop()}var n,r}),Qt,null,[[0,8]])}function an(){var e,t;return Ve.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(Ke.c)(5e3);case 3:return n.prev=3,n.next=6,Object(Ke.b)(Jt);case 6:return e=n.sent,n.next=9,Object(Ke.e)();case 9:if(t=n.sent.notification.checking,n.t0=!t,!n.t0){n.next=14;break}return n.next=14,Object(Ke.d)((a=nn(e),{type:q,notifications:a}));case 14:n.next=20;break;case 16:return n.prev=16,n.t1=n.catch(3),n.next=20,Object(Ke.d)((r=n.t1,{type:J,error:r}));case 20:n.next=0;break;case 22:case"end":return n.stop()}var r,a}),en,null,[[3,16]])}function on(e){var t,n,r;return Ve.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ke.e)();case 2:return t=a.sent,n=t.notification.notifications,r=n.filter((function(t){return t.id===e.id}))[0],a.next=7,Object(Ke.d)({type:W,notification:r});case 7:return a.prev=7,a.next=10,Object(Ke.b)(Xt,r);case 10:return n[n.indexOf(r)].isChecked=!0,a.next=13,Object(Ke.d)(Zt(n));case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a.catch(7),a.next=19,Object(Ke.d)($t(n,a.t0));case 19:case"end":return a.stop()}}),tn,null,[[7,15]])}var sn=Ve.a.mark(cn);function cn(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.f)(B,rn);case 2:return e.next=4,Object(Ke.f)(K,an);case 4:return e.next=6,Object(Ke.f)(M,on);case 6:case"end":return e.stop()}}),sn)}var un=Ve.a.mark(dn);function dn(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.a)([Ye(),Nt(),Vt(),cn()]);case 2:case"end":return e.stop()}}),un)}var ln=Object(l.a)(),bn=Object(d.d)(We,window.__REDUX_DEVTOOLS_EXTENSION__?Object(d.c)(Object(d.a)(ln),window.__REDUX_DEVTOOLS_EXTENSION__()):Object(d.a)(ln));ln.run(dn);var pn=bn,jn=n(130),On=n(280),fn=n(12),hn=n(293),mn=n(71),vn=n(145),xn=n.n(vn),Sn=n(226),gn=n(279),wn=n(294),En=n(276),yn=n(270),kn=n(268),Cn=n(292),Nn=n(46),_n=n(297),Tn=n(2),Rn=Object(jn.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:50},root:{background:"white"},whiteColor:{color:"white"},select:{padding:e.spacing(1)}}}));var Pn=function(){var e=Object(_n.a)().i18n,t=Object(Nn.useSnackbar)().closeSnackbar,n=a.a.useState(e.language),r=Object(fn.a)(n,2),o=r[0],i=r[1],s=function(n){n!==o&&(window.localStorage.setItem("language",n),e.changeLanguage(n),i(n),t())};"en"!==e.language&&"pl"!==e.language&&s("en");var c=Rn();return Object(Tn.jsx)(kn.a,{className:c.formControl,variant:"outlined",children:Object(Tn.jsxs)(Cn.a,{value:o,onChange:function(e){return s(e.target.value)},displayEmpty:!0,classes:{root:c.whiteColor,icon:c.whiteColor,select:c.select},inputProps:{"data-testid":"lang-menu"},children:[Object(Tn.jsx)(yn.a,{value:"en",children:"EN"}),Object(Tn.jsx)(yn.a,{value:"pl",children:"PL"})]})})},In=n(277),Dn=n(278),Ln=n(274),An=n(275),zn=n(269),Hn=n(271),Bn=n(102),Fn=n(225),Un=n(272),Mn=n(273),Wn=n(76),Gn=n.n(Wn),Vn=function(e){return new Date(1e3*e).toLocaleString()},Kn=function(e){for(var t in e)if(e[t]&&e[t].length>0)return!1;return!0};function qn(e){var t=e.sensorType,n=Object(_n.a)().t;return function(e){var t={TEMPERATURE_SENSOR:n("dashboard:temperature-sensor-name"),windowSensor:n("dashboard:window-sensor-name"),windowBlind:n("dashboard:window-blind-name"),stoveSensor:n("dashboard:stove-sensor-name"),smokeSensor:n("dashboard:smoke-sensor-name"),LED_CONTROLLER:n("dashboard:RGB-light-name"),led:n("dashboard:RGB-light-name")};return t[e]?t[e]:n("unknown-sensor")}(t)}var Jn={TEMPERATURE_SENSOR:{color:"HSL(36, 87%, 52%)",colorLight:"HSL(30, 100%, 90%)",colorDark:"HSL(30, 100%, 30%)"},windowSensor:{color:"HSL(216, 87%, 52%)",colorLight:"HSL(260, 100%, 95%)",colorDark:"HSL(260, 100%, 35%)"},windowBlind:{color:"HSL(94, 65%, 44%)",colorLight:"HSL(332, 70%, 90%)",colorDark:"HSL(332, 70%, 30%)"},stoveSensor:{color:"HSL(4, 100%, 60%)",colorLight:"HSL(4, 100%, 96%)",colorDark:"HSL(4, 100%, 46%)"},smokeSensor:{color:"HSL(0, 0%, 50%)",colorLight:"HSL(0, 0%, 80%)",colorDark:"HSL(0, 0%, 20%)"},LED_CONTROLLER:{color:"HSL(336, 87%, 52%)",colorLight:"HSL(129, 59%, 85%)",colorDark:"HSL(129, 59%, 12%)"},led:{color:"HSL(336, 87%, 52%)"}},Xn=n(52),Yn=n(35),Zn=Object(jn.a)((function(e){return{size:{fontSize:"2.15vh"}}}));function $n(){var e=Zn();return Object(Tn.jsx)(Xn.a,{icon:Yn.a,className:e.size})}var Qn=n(140),er=n.n(Qn),tr=Object(jn.a)((function(e){return{size:{fontSize:"3.1vh"}}}));function nr(){var e=tr();return Object(Tn.jsx)(er.a,{className:e.size})}var rr=Object(jn.a)({size:{fontSize:"1.95vh"},smokePulse:{color:"rgba(235, 49, 52, 1)",animationName:"$pulse",animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"@keyframes pulse":{"0%":{transform:"scale(1.0)"},"25%":{transform:"scale(0.87)"},"50%":{transform:"scale(1.0)"},"75%":{transform:"scale(1.06)"},"100%":{transform:"scale(1.0)"}}});function ar(e){var t=e.isSmokeDetected,n=void 0!==t&&t,r=rr();return Object(Tn.jsx)(Xn.a,{"data-testid":"smoke-sensor-inner",icon:Yn.c,className:n?"".concat(r.smokePulse," ").concat(r.size):r.size})}var or=Object(jn.a)((function(e){return{temperature:function(e){return{fontSize:e.fontSize,fontWeight:"bold",textAlign:"center",verticalAlign:"center"}}}}));function ir(e){var t=e.temperature,n=void 0===t?15:t;n=n.toString();var r=or({fontSize:function(e){return 6===e.length?"1.1vh":5===e.length?"1.2vh":4===e.length?"1.3vh":3===e.length?"1.5vh":2===e.length||1===e.length?"1.85vh":"0rem"}(n)});return Object(Tn.jsx)(mn.a,{className:r.temperature,children:n})}var sr=n(141),cr=n.n(sr),ur=Object(jn.a)((function(e){return{container:{position:"relative"},inner:{fontSize:"2.9vh",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},blind:function(e){return{fontSize:"2vh",clipPath:"polygon(0 0, 100% 0, 100% ".concat(e.position,"%, 0 ").concat(e.position,"%)")}}}}));function dr(e){var t=e.position,n=ur({position:function(e){return e>87?0:e>62?25:e>37?50:e>12?75:e>=0?100:void 0}(void 0===t?50:t)});return Object(Tn.jsxs)("div",{className:n.container,children:[Object(Tn.jsx)(cr.a,{className:n.inner}),Object(Tn.jsx)(Xn.a,{"data-testid":"blind-icon",icon:Yn.d,className:"".concat(n.inner," ").concat(n.blind)})]})}var lr=n(143),br=n.n(lr),pr=n(142),jr=n.n(pr),Or=Object(jn.a)((function(e){return{size:{fontSize:"2.85vh"}}}));function fr(e){var t=e.status,n=void 0===t?"closed":t,r=Or();return"open"===n?Object(Tn.jsx)(jr.a,{"data-testid":"window-sensor-launch-icon",className:r.size}):Object(Tn.jsx)(br.a,{"data-testid":"border-all-icon",className:r.size})}var hr=Object(jn.a)((function(e){return{size:{fontSize:"2.8vh"}}}));function mr(e){var t=e.temperature,n=void 0===t?15:t,r=hr();return Object(Tn.jsx)(Xn.a,{icon:n<0?Yn.e:n<10?Yn.h:n<20?Yn.g:n<30?Yn.i:Yn.f,className:r.size})}var vr=Object(jn.a)((function(e){return{size:{fontSize:"2vh"}}}));function xr(){var e=vr();return Object(Tn.jsx)(Xn.a,{icon:Yn.b,className:e.size})}function Sr(e,t){return{TEMPERATURE_SENSOR:Object(Tn.jsx)(ir,{temperature:t&&t.value}),windowSensor:Object(Tn.jsx)(fr,{status:t&&t.status}),windowBlind:Object(Tn.jsx)(dr,{position:t&&t.position}),stoveSensor:Object(Tn.jsx)(nr,{}),smokeSensor:Object(Tn.jsx)(ar,{isSmokeDetected:t&&t.isSmokeDetected}),LED_CONTROLLER:Object(Tn.jsx)($n,{}),led:Object(Tn.jsx)($n,{}),TEMPERATURE_SENSOR_ICON:Object(Tn.jsx)(mr,{temperature:t&&t.value})}[e]||Object(Tn.jsx)(xr,{})}var gr=Object(jn.a)((function(e){return{close:{padding:e.spacing(.5)},id:{fontStyle:"italic"},sensor:{fontWeight:"bold"},icon:function(e){return{display:"flex",alignItems:"center",justifyContent:"center",transform:"scale(1.24)",minWidth:"30px",textAlign:"center",marginRight:"1rem",color:e.accentColor}},elevation:function(e){return{transform:e.clicked?"scale(1.04)":"",transition:"transform 0.2s ease",margin:"5px","&:hover":{cursor:"pointer"}}}}})),wr=function(e){var t=e.notification,n=t.id,r=t.timestamp,a=t.sensorId,o=t.isChecked,i=e.handleNotificationCheck,s=e.sensorType,c=e.clicked,u=e.handleClick,d=Object(_n.a)().t,l=Jn[s]?Jn[s].color:"black",b=gr({accentColor:l,clicked:c}),p=!o&&Object(Tn.jsx)(Hn.a,{children:Object(Tn.jsx)(Sn.a,{role:"check-notification","aria-label":"close",color:"inherit",className:b.close,onClick:function(e){i(n,e),e.stopPropagation()},onKeyDown:function(e){i(n,e),e.stopPropagation()},children:Object(Tn.jsx)(Gn.a,{})})}),j=s?Object(Tn.jsx)(qn,{sensorType:s}):d("unknown-sensor");return Object(Tn.jsx)(Bn.a,{className:b.elevation,elevation:c?6:2,square:!0,onClick:u,children:Object(Tn.jsxs)(Fn.a,{"data-testid":"drawer-item",disabled:o,className:b.row,children:[Object(Tn.jsx)(Un.a,{className:b.icon,children:Sr("TEMPERATURE_SENSOR"===s?"TEMPERATURE_SENSOR_ICON":s)}),Object(Tn.jsx)(Mn.a,{primary:Object(Tn.jsxs)("div",{children:[Object(Tn.jsx)("span",{className:b.sensor,children:j}),Object(Tn.jsx)("span",{className:b.id,children:a>0?" ".concat(a):""})]}),secondary:Vn(r)}),p]},n)})},Er=Object(jn.a)((function(e){return{list:{margin:"auto",width:"95%"}}})),yr=function(e){var t=e.notifications,n=e.handleNotificationCheck,a=(e.sensors,Er()),o=Object(r.useState)(null),i=Object(fn.a)(o,2),s=i[0],c=i[1];return Object(Tn.jsx)("div",{role:"presentation","data-testid":"notification-list",children:Object(Tn.jsx)(zn.a,{className:a.list,children:t.map((function(e){return Object(Tn.jsx)(wr,{notification:e,handleNotificationCheck:n,sensorType:e.type,clicked:s===e.id,handleClick:function(){return t=e.id,void c(s===t?null:t);var t}},e.id)}))})})},kr=function(e){var t=e.uncheckedNotifications,n=Object(_n.a)().t,a=Object(s.c)((function(e){return e.notification})),o=a.fetchError,i=a.isDrawerOpen,u=a.updateError,d=Object(s.b)();Object(r.useEffect)((function(){d({type:B}),d({type:K})}),[]);var l=function(){return function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&d({type:Y})}},b=0===t.length&&Object(Tn.jsx)(hn.a,{pt:3,align:"center",children:Object(Tn.jsx)(mn.a,{variant:"overline","data-testid":"no-new-notifications",children:n("no-new-notifications")})})||(u||o)&&Object(Tn.jsx)(hn.a,{pt:3,align:"center",children:Object(Tn.jsx)(mn.a,{variant:"overline","data-testid":"something-went-wrong",children:n("something-went-wrong")})})||Object(Tn.jsx)(yr,{notifications:t,handleNotificationCheck:function(e,t){("keydown"===t.type&&"Enter"===t.key||"click"===t.type)&&d(Yt(e))}});return Object(Tn.jsx)("div",{children:Object(Tn.jsxs)(Ln.a,{anchor:"right",open:i,onClose:l(),children:[Object(Tn.jsx)(hn.a,{py:1,px:3,align:"center",children:Object(Tn.jsx)(mn.a,{variant:"overline",children:Object(Tn.jsx)(c.b,{to:"/notifications",style:{textDecoration:"none"},onClick:l(),"data-testid":"link-notification-history",children:n("notification-history")})})}),Object(Tn.jsx)(An.a,{}),b]})})},Cr=function(e){var t=e.filter((function(e){return!e.isChecked}));return{checkedNotifications:e.filter((function(e){return e.isChecked})),uncheckedNotifications:t}},Nr=Object(jn.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},tabs:{flexGrow:1,minHeight:e.spacing(7)},buttons:{display:"flex",flexGrow:1,textAlign:"right",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",minHeight:e.spacing(7)},toolbar:{paddingTop:"3px",minHeight:e.spacing(6),alignItems:"baseline"}}}));function _r(e){return Object(Tn.jsx)(En.a,Object(p.a)({component:c.b},e))}function Tr(e){return{"/":0}[e]}var Rr=function(){var e=Nr(),t=Object(u.g)(),n=Object(s.c)((function(e){return Cr(e.notification.notifications)})),a=n.checkedNotifications,o=n.uncheckedNotifications,i=Object(_n.a)().t,c=Object(r.useState)(Tr(t.pathname)),d=Object(fn.a)(c,2),l=d[0],b=d[1];Object(r.useEffect)((function(){b(Tr(t.pathname))}),[t.pathname]);var p=Object(s.b)();return Object(Tn.jsx)(In.a,{position:"static","data-testid":"header-id",children:Object(Tn.jsxs)(Dn.a,{className:e.toolbar,children:[Object(Tn.jsx)(mn.a,{variant:"h6",className:e.title,children:"Smart Kitchen"}),Object(Tn.jsx)(wn.a,{edge:"start",className:e.tabs,value:l,onChange:function(e,t){b(t)},"aria-label":"Navigation tabs",indicatorColor:"secondary",centered:!0,children:Object(Tn.jsx)(_r,{label:i("nav-dashboard"),to:"/","data-testid":"dashboard-tab-id"})}),Object(Tn.jsxs)(hn.a,{className:e.buttons,children:[Object(Tn.jsx)(Pn,{}),Object(Tn.jsx)(Sn.a,{"data-testid":"drawer-open","aria-label":"notifications",color:"inherit",onClick:function(){p({type:X})},children:Object(Tn.jsx)(gn.a,{badgeContent:o.length,overlap:"circle",color:"secondary",children:Object(Tn.jsx)(xn.a,{})})}),Object(Tn.jsx)(kr,{uncheckedNotifications:o,checkedNotifications:a})]})]})})},Pr=Object(jn.a)((function(e){return{navigation:{zIndex:100},hide:{display:"none"}}})),Ir=function(){var e=Pr(),t=Object(u.h)("/authors/:id");return Object(Tn.jsx)(On.a,{item:!0,xs:12,className:t?e.hide:e.navigation,children:Object(Tn.jsx)(Rr,{})})},Dr=function(e){var t,n,a=e.pingEndpoint,o=Object(Nn.useSnackbar)(),i=o.enqueueSnackbar,s=o.closeSnackbar,c=Object(_n.a)().t,u=[408,502,504],d=function(){t||(t=i(c("connection-warning"),{variant:"warning",persist:!0,onExiting:function(){t=null}}))},l=function(){t&&(s(t),t=null)},b=function(e){!e.response||u.includes(e.response.status)?d():console.error(e)},p=function(){navigator.onLine?a().then((function(){return l()})).catch(b):d()};return Object(r.useEffect)((function(){return p(),n=setInterval((function(){return p()}),1e4),function(){l(),clearInterval(n)}}),[]),Object(r.useEffect)((function(){return window.addEventListener("offline",(function(){return d()}))})),Object(r.useEffect)((function(){return window.addEventListener("online",(function(){return l()}))})),null},Lr=Object(jn.a)((function(e){return{close:{padding:e.spacing(.5)}}}));var Ar=function(e){var t=Lr(),n=a.a.createRef(),r=function(e){return function(){n.current.closeSnackbar(e)}};return Object(Tn.jsx)(Nn.SnackbarProvider,{ref:n,maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"left"},action:function(e){return Object(Tn.jsx)(Sn.a,{"aria-label":"close",color:"inherit",className:t.close,onClick:r(e),children:Object(Tn.jsx)(Gn.a,{})})},preventDuplicate:!0,children:e.children})},zr=function(){return rt.a.get("/.well-known/health-check",{timeout:5e3})},Hr=Object(jn.a)((function(e){return{root:{height:"100vh"},content:{height:"calc(100vh - 64px)",boxSizing:"border-box",backgroundColor:e.palette.background.default}}})),Br=function(e){var t=e.children,n=Hr();return Object(Tn.jsx)(On.a,{container:!0,maxwidth:"xs",className:n.root,"data-testid":"dashboard-id",children:Object(Tn.jsxs)(Ar,{children:[Object(Tn.jsx)(Dr,{pingEndpoint:zr}),Object(Tn.jsx)(Ir,{}),Object(Tn.jsx)(On.a,{container:!0,maxwidth:"xs",className:n.content,children:t})]})})};function Fr(){return{type:w}}var Ur=n.p+"static/media/house.294d87b9.svg",Mr=function(e,t,n){var r=(2-t/100)*n/2;return 0!==r&&(t=100===r?0:r<50?t*n/(2*r):t*n/(200-2*r)),[e,t,r]},Wr=Object(jn.a)((function(e){return{container:function(e){return{boxSizing:"border-box",width:e.width,height:e.height,backgroundColor:"white",border:"".concat(e.borderSize,"px solid ").concat(e.sensorBorderColor),transform:e.clicked?"scale(1.2)":"",transition:"transform 0.2s ease",zIndex:e.clicked?"2":"1",top:e.position.top,left:e.position.left,position:e.position.position,borderRadius:"50%","&:hover":{cursor:"pointer"},display:"flex",justifyContent:"center",alignItems:"center"}}}})),Gr=function(e){var t=Object(s.b)(),n=e.sensorData,r=e.position,a=e.sensorSize,o=n.id,i=n.type,c=Object(s.c)((function(e){return e.mapListCommunication}));function u(e){!function(e){document.querySelector("#sensor".concat(e)).scrollIntoView({behavior:"smooth",block:"end"})}(o),t(function(e,t){return{type:E,id:e,sensorBorderColor:t}}(o,e))}var d="LED_CONTROLLER"===i,l=d?function(){var e=Mr(n.hue,n.saturation,n.value);return"hsl(".concat(e[0],", ").concat(e[1],"%, ").concat(e[2],"%)")}():"#444",b=o===c.pressedItemId,p=Wr({sensorBorderColor:l,clicked:b,sensorSize:a,width:a.width||"20px",height:a.height||"20px",position:r,borderSize:d?4:2});return Object(Tn.jsx)(Bn.a,{elevation:b?8:0,className:p.container,"data-testid":"sensor-id",onClick:function(){return u(l)},children:Sr(i,n)})},Vr=n(286),Kr=n(281),qr=n(285),Jr=n(283),Xr=n(284),Yr=n(282),Zr=function(e){var t=Object(_n.a)().t,n=e.open,r=void 0!==n&&n,a=e.onClose,o=e.title,i=e.content;return Object(Tn.jsxs)(Kr.a,{open:r,onClose:a,"data-testid":"modal-test-id","aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:[Object(Tn.jsx)(Yr.a,{id:"alert-dialog-title",children:o}),Object(Tn.jsx)(Jr.a,{children:Object(Tn.jsx)(Xr.a,{id:"alert-dialog-description",children:i})}),Object(Tn.jsx)(qr.a,{children:Object(Tn.jsx)(Vr.a,{onClick:a,color:"primary",autoFocus:!0,children:t("dashboard:map-modal-close")})})]})},$r=function(e,t){return e/t*100},Qr=function(e,t){return e*t/100},ea=Object(jn.a)((function(e){return{container:{position:"relative"},image:function(e){return{cursor:e.mapDisabled?"cell":e.pointPressed?"pointer":"not-allowed",height:"auto",width:"auto",minWidth:"100%",maxHeight:"calc(100vh - 150px)"}}}})),ta=function(){var e=Object(_n.a)().t,t=Object(s.b)(),n=Object(r.useRef)(null),a=Object(r.useState)(null),o=Object(fn.a)(a,2),i=o[0],c=o[1],u=Object(r.useState)(null),d=Object(fn.a)(u,2),l=d[0],b=d[1],j=Object(r.useState)(!1),O=Object(fn.a)(j,2),f=O[0],h=O[1],m=Object(r.useState)(!1),v=Object(fn.a)(m,2),x=v[0],S=v[1],g=Object(Nn.useSnackbar)().enqueueSnackbar,w=Object(s.c)((function(e){return e.sensor.sensors})),E=Object(s.c)((function(e){return e.mapListCommunication})),k=Object(s.c)((function(e){return e.dbInteraction})),C=k._id,N=k.addError,T=k.addErrorPoints,R=k.removeSuccess,P=k.removeErrorPoints,I=Object(s.c)((function(e){var t=e.sensor.sensors;return Object.keys(t).map((function(e){return t[e]})).flat().filter((function(e){return e.mapPosition}))})),D=function(){return 1===I.filter((function(e){return e.id===E.pressedItemId})).length},L=ea({mapDisabled:E.waitingForSensorLocation,pointPressed:E.mapPointPressed||D()});Object(r.useEffect)((function(){return function(){t(Ze())}}),[t]),Object(r.useEffect)((function(){if(void 0!==N){T.forEach((function(n){g(e("dashboard:sensor-add-failed",{id:n}),{variant:"error"}),t({type:_,_id:n})}));var n=Object.values(w).map((function(e){return e.map((function(e){return T.includes(e.id)&&delete e.mapPosition,e}))}));t($e(n))}}),[N]),Object(r.useEffect)((function(){if(R&&0!==P.length){var e=function(e,t){return Object.values(e).map((function(e){return e.map((function(e){return e.id===t&&delete e.mapPosition,e}))}))}(w,C);t($e(e)),t(Lt(C))}}),[R]),Object(r.useEffect)((function(){function e(){if(null!==n&&null!==n.current){var e=n.current,t=e.height,r=e.width;c(t),b(r),S(!0)}}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);return Object(Tn.jsxs)("div",{className:L.container,children:[Object(Tn.jsx)("img",{"data-testid":"image-id",ref:n,onClick:function(e){if((E.mapPointPressed||D())&&t(Fr()),E.waitingForSensorLocation){var n=e.nativeEvent,r=n.offsetX,a=void 0===r?0:r,o=n.offsetY,s=void 0===o?0:o,c=$r(a,l),u=$r(s,i),d=I.map((function(e){return Object.assign(e,{x:e.mapPosition.x,y:e.mapPosition.y})}));if(b=c,j=u,d.filter((function(e){return Math.abs(e.x-b)<4&&Math.abs(e.y-j)<4}))[0])h(!0);else{var b,j,O;t(Fr());var f,m=Object.values(w).map((function(e){return e.map((function(e){return e.id===E.sensorData.id&&e.type===E.sensorData.type?(O=e,Object(p.a)(Object(p.a)({},e),{},{mapPosition:{x:c,y:u}})):e}))}));t($e(m)),t((f={_id:O.id,type:O.type,mapPosition:{x:c,y:u}},{type:y,_id:f._id,sensorType:f.type,mapPosition:f.mapPosition}))}}},src:Ur,alt:"Home plan",className:L.image,onLoad:function(){var e=n.current,t=e.height,r=e.width;S(!0),c(t),b(r)}}),x?I.map((function(e){return function(e){return Object.prototype.hasOwnProperty.call(e,"mapPosition")&&Object.prototype.hasOwnProperty.hasOwnProperty.call(e.mapPosition,"x")&&Object.prototype.hasOwnProperty.hasOwnProperty.call(e.mapPosition,"y")}(e)&&Object(Tn.jsx)(Gr,{sensorData:e,"data-testid":"sensor-id",sensorSize:{width:Math.round(i/20),height:Math.round(i/20)},position:{top:Qr(e.mapPosition.y,i)-Math.round(i/20)/2,left:Qr(e.mapPosition.x,l)-Math.round(i/20)/2,position:"absolute"},sensorColor:Jn[e.type]&&Jn[e.type].color},e.id)})):null,Object(Tn.jsx)(Zr,{"data-testid":"modal-test-id",open:f,onClose:function(){return h(!1)},title:e("dashboard:map-modal-title"),content:e("dashboard:map-modal-content")})]})},na=Object(jn.a)((function(e){return{mapBackground:{backgroundColor:e.palette.background.default},mapContainer:{display:"flex",alignItems:"center",maxWidth:"100%",height:"calc(100vh - 64px)",objectFit:"contain"}}})),ra=function(){var e=na();return Object(Tn.jsx)(On.a,{item:!0,xs:9,className:e.mapBackground,container:!0,justify:"center",alignItems:"center",children:Object(Tn.jsx)("div",{className:e.mapContainer,children:Object(Tn.jsx)(ta,{})})})},aa=n(290),oa=n(7),ia=n(300),sa=n(289),ca=n(288),ua=n(146),da=n.n(ua);function la(e){var t=e.sensorData,n=(e.classes,e.handleRemoveClick,Object(_n.a)().t);return Object(Tn.jsxs)(Tn.Fragment,{children:[n("dashboard:light-hue"),": ",t.hue," ",Object(Tn.jsx)("br",{}),n("dashboard:light-saturation"),": ",t.saturation," ",Object(Tn.jsx)("br",{}),n("dashboard:light-value"),": ",t.value," ",Object(Tn.jsx)("br",{})]})}function ba(e){var t=e.sensorData,n=(e.classes,e.handleRemoveClick,Object(_n.a)().t);return Object(Tn.jsxs)(Tn.Fragment,{children:[n("dashboard:stove-power"),": ",t.power?"ON":"OFF"," ",Object(Tn.jsx)("br",{}),t.power&&Object(Tn.jsxs)(Tn.Fragment,{children:["".concat(n("dashboard:stove-timer"),": ").concat(10*t.timer.min,"m")," ",Object(Tn.jsx)("br",{}),"".concat(n("dashboard:temperature"),": ").concat(t.temperature,"\xb0C")," ",Object(Tn.jsx)("br",{}),"".concat(n("dashboard:watt"),": ").concat(t.watt,"W")," ",Object(Tn.jsx)("br",{}),n("dashboard:stove-mode"),": ",t.mode," ",Object(Tn.jsx)("br",{})]})]})}function pa(e){var t=e.sensorData,n=(e.classes,e.handleRemoveClick,Object(_n.a)().t);return t.isSmokeDetected?n("dashboard:smoke-detected"):n("dashboard:smoke-not-detected")}function ja(e){var t=e.sensorData,n=(e.classes,e.handleRemoveClick,Object(_n.a)().t);return"".concat(n("dashboard:temperature"),": ").concat(t.value,"\xb0C")}function Oa(e){var t=e.sensorData,n=(e.classes,e.handleRemoveClick,Object(_n.a)().t);return"".concat(n("dashboard:blinds-position"),": ").concat(t.position,"%")}function fa(e){var t=e.sensorData,n=(e.classes,e.handleRemoveClick,Object(_n.a)().t);return"open"===t.status?n("dashboard:window-open"):n("dashboard:window-closed")}var ha=n(298),ma=function(e,t,n){var r=Mr(e,t,n);return"hsl(".concat(r[0],", ").concat(r[1],"%, ").concat(r[2],"%)")},va=Object(jn.a)({root:{width:"100%"},hueSlider:function(e){return{backgroundImage:"linear-gradient(to right, ".concat(ma(0,e.saturation,e.value)," 0%, ").concat(ma(60,e.saturation,e.value)," 17%, ").concat(ma(120,e.saturation,e.value)," 33%, ").concat(ma(180,e.saturation,e.value)," 50%, ").concat(ma(240,e.saturation,e.value)," 67%, ").concat(ma(300,e.saturation,e.value)," 83%, ").concat(ma(360,e.saturation,e.value)," 100%)")}},saturationSlider:function(e){return{backgroundImage:"linear-gradient(to right, #808080, ".concat(ma(e.hue,e.saturation,e.value),")")}},valueSlider:function(e){return{backgroundImage:"linear-gradient(to right, #000000, ".concat(ma(e.hue,e.saturation,e.value),")")}},button:function(e){return{backgroundColor:ma(e.hue,e.saturation,e.value),"&:hover":{backgroundColor:ma(e.hue,e.saturation,e.value)},transition:"all 0s ease",marginTop:16,padding:15}}}),xa=Object(oa.a)((function(e){return{root:{height:15,padding:"0",marginBottom:5,marginTop:0,outline:"1px outset ".concat(e.palette.primary.main)},rail:{height:0},thumb:{height:17,width:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid ".concat(e.palette.primary.main),borderBottom:"6px solid ".concat(e.palette.secondary.main),borderRadius:"5%",backgroundColor:"transparent",marginLeft:-6,marginTop:-1}}}))(ha.a),Sa=Object(oa.a)((function(e){return{contained:{color:e.palette.getContrastText(e.palette.background.paper),backgroundColor:e.palette.background.paper}}}))(Vr.a);function ga(e){var t=e.sensorData,n=e.handleChangeExpanded,a=Object(_n.a)().t,o=Object(s.b)(),i=Object(r.useState)(t.hue),c=Object(fn.a)(i,2),u=c[0],d=c[1],l=Object(r.useState)(t.saturation),b=Object(fn.a)(l,2),p=b[0],j=b[1],O=Object(r.useState)(t.value),f=Object(fn.a)(O,2),h=f[0],m=f[1],v=Object(r.useState)(t),x=Object(fn.a)(v,2),S=x[0],g=x[1],w=va({hue:u,saturation:p,value:h});Object(r.useEffect)((function(){(t.hue!==S.hue||t.value!==S.value||t.saturation!==S.saturation)&&(d(t.hue),j(t.saturation),m(t.value),g(t))}));return Object(Tn.jsxs)("div",{className:w.root,children:[Object(Tn.jsxs)("div",{children:[Object(Tn.jsx)(mn.a,{id:"hue",gutterBottom:!0,children:a("dashboard:light-hue")}),Object(Tn.jsx)(xa,{className:w.hueSlider,value:u,onChange:function(e,t){d(t)},"aria-labelledby":"hue",valueLabelDisplay:"auto",min:0,max:359,track:!1})]}),Object(Tn.jsxs)("div",{children:[Object(Tn.jsx)(mn.a,{id:"saturation",gutterBottom:!0,children:a("dashboard:light-saturation")}),Object(Tn.jsx)(xa,{className:w.saturationSlider,value:p,onChange:function(e,t){j(t)},"aria-labelledby":"saturation",valueLabelDisplay:"auto",min:0,max:100,track:!1})]}),Object(Tn.jsxs)("div",{children:[Object(Tn.jsx)(mn.a,{id:"value",gutterBottom:!0,children:a("dashboard:light-value")}),Object(Tn.jsx)(xa,{className:w.valueSlider,value:h,onChange:function(e,t){m(t)},"aria-labelledby":"value",valueLabelDisplay:"auto",min:0,max:100,track:!1})]}),Object(Tn.jsx)(hn.a,{display:"flex",justifyContent:"center",children:Object(Tn.jsx)(Vr.a,{component:"div",className:w.button,variant:"outlined",children:Object(Tn.jsx)(Sa,{variant:"contained",onClick:function(){var e={id:t.id,type:t.type,hue:u,saturation:p,value:h};o(function(e){return{type:Z,lightSensorDetails:e}}(e)),n()()},children:Object(Tn.jsx)("span",{className:w.buttonText,children:a("dashboard:sensor-detail-confirm")})})})})]})}var wa=Object(jn.a)({root:{width:"100%"}});function Ea(e){var t=e.sensorData,n=e.handleChangeExpanded,a=Object(_n.a)().t,o=Object(s.b)(),i=wa(),c=Object(r.useState)(t.position),u=Object(fn.a)(c,2),d=u[0],l=u[1],b=Object(r.useState)(t),p=Object(fn.a)(b,2),j=p[0],O=p[1];Object(r.useEffect)((function(){j.position!==t.position&&(l(t.position),O(t))}));return Object(Tn.jsxs)("div",{className:i.root,children:[Object(Tn.jsxs)("div",{children:[Object(Tn.jsx)(mn.a,{id:"value",gutterBottom:!0,children:a("dashboard:blinds-position")}),Object(Tn.jsx)(ha.a,{defaultValue:0,value:d,onChange:function(e,t){l(t)},"aria-labelledby":"value",valueLabelDisplay:"auto",min:0,max:100})]}),Object(Tn.jsx)(hn.a,{display:"flex",justifyContent:"center",children:Object(Tn.jsx)(Vr.a,{variant:"outlined",color:"primary",onClick:function(){var e={id:t.id,type:t.type,position:d};o({type:te,windowBlindsSensorDetails:e}),n()()},children:a("dashboard:sensor-detail-confirm")})})]})}var ya=n(295),ka=n(299),Ca=n(287),Na=Object(jn.a)((function(e){return{root:{width:"100%"},buttonGroup:{display:"flex",justifyContent:"center","& > *":{margin:e.spacing(1)}},textBox:{margin:"9%",width:"100%",height:50,display:"flex",justifyContent:"center",borderRadius:"2%",border:"1px solid #C4C4C4",alignItems:"center",fontSize:20,fontFamily:"Arial"}}})),_a=[0,60,80,120,150,180,220,270],Ta=[0,500,800,1e3,1300,1600,1900,2100];function Ra(e){var t=e.sensorData,n=(e.handleChangeExpanded,Object(_n.a)().t,Object(s.b)()),a=Object(r.useState)(t.timer),o=Object(fn.a)(a,2),i=o[0],c=o[1],u=Object(r.useState)(t.temperature),d=Object(fn.a)(u,2),l=d[0],b=d[1],p=Object(r.useState)(t.watt),j=Object(fn.a)(p,2),O=j[0],f=j[1],h=Object(r.useState)(t.uptime),m=Object(fn.a)(h,2),v=m[0],x=m[1],S=Object(r.useState)(t.power),g=Object(fn.a)(S,2),w=g[0],E=g[1],y=Object(r.useState)(t.level),k=Object(fn.a)(y,2),C=k[0],N=k[1],_=Object(r.useState)(t.mode),T=Object(fn.a)(_,2),R=T[0],P=T[1],I=Object(r.useState)(t.overheat),D=Object(fn.a)(I,2),L=D[0],A=D[1],z=Object(r.useState)(t),H=Object(fn.a)(z,2),B=H[0],F=H[1],U=Object(r.useState)("\xb0C"),M=Object(fn.a)(U,2),W=M[0],G=M[1],V=Na();Object(r.useEffect)((function(){var e=t.timer!==B.timer;t.temperature!==B.temperature||t.watt!==B.watt||t.uptime!==B.uptime||t.power!==B.power||t.level!==B.level||t.mode!==B.mode||(t.overheat,B.overheat),e&&(c(t.timer),b(t.temperature),f(t.watt),x(t.uptime),E(t.power),N(t.level),P(t.mode),A(t.overheat),F(t))}));var K=function(e){var r={id:t.id,sensorType:t.type,timer:i,temperature:_a[e],watt:Ta[e],uptime:v,power:!w,level:e,mode:R,overheat:L};n(tt(r))},q=function(e){var r={id:t.id,sensorType:t.type,timer:i,temperature:_a[C+e],watt:Ta[C+e],uptime:v,power:w,level:C+e,mode:R,overheat:L};n(tt(r))};return Object(Tn.jsxs)("div",{className:V.root,children:[Object(Tn.jsxs)(On.a,{container:!0,spacing:4,children:[Object(Tn.jsx)(On.a,{item:!0,xs:8,children:Object(Tn.jsx)("div",{className:V.textBox,children:"\xb0C"==W?l:O})}),Object(Tn.jsx)(On.a,{item:!0,xs:2,children:Object(Tn.jsxs)(ka.a,{value:W,onChange:function(e){G(e.target.value)},children:[Object(Tn.jsx)(Ca.a,{value:"\xb0C",control:Object(Tn.jsx)(ya.a,{}),label:"\xb0C"}),Object(Tn.jsx)(Ca.a,{value:"W",control:Object(Tn.jsx)(ya.a,{}),label:"W"})]})})]}),Object(Tn.jsxs)("div",{className:V.buttonGroup,children:[Object(Tn.jsx)(Vr.a,{component:"div",variant:"outlined",onClick:function(){E((function(e){var t=e?0:1;return b(_a[t]),f(Ta[t]),N(t),K(t),!e}))},children:w?"OFF":"ON"}),Object(Tn.jsx)(Vr.a,{component:"div",variant:"outlined",onClick:function(){w&&C>1&&N((function(e){return b(_a[e-1]),f(Ta[e-1]),q(-1),e-1}))},children:"-"}),Object(Tn.jsx)(Vr.a,{component:"div",variant:"outlined",onClick:function(){w&&C<7&&N((function(e){return b(_a[e+1]),f(Ta[e+1]),q(1),e+1}))},children:"+"})]})]})}var Pa=Object(jn.a)((function(e){return{elevation:function(e){return{transform:e.clicked?"scale(1.04)":"",transition:"transform 0.2s ease",margin:"5px"}},row:function(e){return{padding:"4px 2px"}},type:function(e){return{fontWeight:"bold",color:"black"}},id:{fontWeight:"200",fontStyle:"italic"},item:{display:"flex",justifyContent:"start",alignItems:"center"},close:function(t){return{padding:e.spacing(.5),borderRadius:"50%",minWidth:"auto",minHeight:"auto",alighItems:"center",justifyContent:"center",display:t.clicked&&t.isOnMap?"flex":"none","&:hover":{cursor:"pointer"}}},icon:function(e){return{display:"flex",alignItems:"center",justifyContent:"center",transform:"scale(1.4)",minWidth:"30px",textAlign:"center",marginRight:"1rem",color:e.accentColor}}}})),Ia=Object(oa.a)({root:{position:"static",overflowX:"hidden",margin:0,"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(ia.a),Da=Object(oa.a)((function(e){return{root:{padding:e.spacing(2)}}}))(ca.a),La=Object(oa.a)({root:{padding:0},content:{margin:0,"&$expanded":{margin:"0px 0"}},expanded:{},expandIcon:{marginLeft:"-16px",marginRight:"8px",padding:"6px"}})(sa.a);function Aa(e,t,n,r){return{TEMPERATURE_SENSOR:Object(Tn.jsx)(ja,{sensorData:t,classes:n,handleRemoveClick:r}),windowSensor:Object(Tn.jsx)(fa,{sensorData:t,classes:n,handleRemoveClick:r}),windowBlind:Object(Tn.jsx)(Oa,{sensorData:t,classes:n,handleRemoveClick:r}),stoveSensor:Object(Tn.jsx)(ba,{sensorData:t,classes:n,handleRemoveClick:r}),smokeSensor:Object(Tn.jsx)(pa,{sensorData:t,classes:n,handleRemoveClick:r}),LED_CONTROLLER:Object(Tn.jsx)(la,{sensorData:t,classes:n,handleRemoveClick:r})}[e]}function za(e,t){return"LED_CONTROLLER"===e||"windowBlind"===e&&t||"stoveSensor"===e}var Ha=function(e){var t=e.sensorData,n=e.isOnMap,r=e.handleRemoveClick,a=e.expanded,o=e.handleChangeExpanded,i=Object(s.b)(),c=t||{id:"",type:""},u=c.id,d=c.type,l=Object(s.c)((function(e){return e.mapListCommunication}));function b(e,t,n){i(function(e,t,n,r){return{type:g,id:e,sensorColor:t,sensorData:n,isOnMap:r}}(u,e,t,n))}var p=t.id===l.pressedItemId?Jn[d]&&Jn[d].colorLight:"white",j="LED_CONTROLLER"===d?function(){var e=Mr(t.hue,t.saturation,t.value);return"hsl(".concat(e[0],", ").concat(e[1],"%, ").concat(e[2],"%)")}():Jn[d]?Jn[d].color:"black",O=t.id===l.pressedItemId,f=Pa({accentColor:j,bgColor:p,clicked:O,isOnMap:n}),h=function(e,t,n){var r={windowBlind:Object(Tn.jsx)(Ea,{sensorData:t,handleChangeExpanded:n}),LED_CONTROLLER:Object(Tn.jsx)(ga,{sensorData:t,handleChangeExpanded:n}),stoveSensor:Object(Tn.jsx)(Ra,{sensorData:t,handleChangeExpanded:n})};if(r[e])return Object(Tn.jsx)(Da,{children:r[e]})}(d,t,o);return Object(Tn.jsx)(Bn.a,{className:f.elevation,elevation:O?6:0,children:Object(Tn.jsxs)(Ia,{square:!0,className:f.row,expanded:a===u,onChange:o(u),children:[Object(Tn.jsx)(La,{expandIcon:za(d,n)?Object(Tn.jsx)(da.a,{}):null,children:Object(Tn.jsxs)(Fn.a,{id:"sensor".concat(u),onClick:function(e){!function(e,r){r?i(Fr()):b(j,t,n),za(d,!0)&&(a!==u&&o()(),e.stopPropagation())}(e,O)},children:[Object(Tn.jsx)(Un.a,{className:f.icon,children:Sr("TEMPERATURE_SENSOR"===d?"TEMPERATURE_SENSOR_ICON":d,t)}),Object(Tn.jsx)(Mn.a,{primary:Object(Tn.jsxs)(Tn.Fragment,{children:[Object(Tn.jsx)("span",{className:f.type,children:Object(Tn.jsx)(qn,{sensorType:d})}),Object(Tn.jsxs)("span",{className:f.id,children:[" ",t.id]})]}),secondary:Object(Tn.jsx)("span",{className:f.item,children:Aa(d,t,f,r)})}),Object(Tn.jsx)(Vr.a,{className:f.close,onClick:function(e){return function(e){e.stopPropagation(),r(!0)}(e)},children:Object(Tn.jsx)(Gn.a,{})})]})}),h]})})},Ba=n(296),Fa=function(e){var t=e.open,n=void 0!==t&&t,r=e.handleCancel,a=e.handleOk,o=e.title,i=e.content,s=Object(_n.a)().t;return Object(Tn.jsxs)(Kr.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs",open:n,children:[Object(Tn.jsx)(Yr.a,{children:o}),Object(Tn.jsx)(Jr.a,{children:Object(Tn.jsx)(Xr.a,{children:i})}),Object(Tn.jsxs)(qr.a,{children:[Object(Tn.jsx)(Vr.a,{onClick:r,color:"primary",children:s("dashboard:sensor-remove-cancel")}),Object(Tn.jsx)(Vr.a,{autoFocus:!0,onClick:a,color:"primary",children:s("dashboard:sensor-remove-confirm")})]})]})},Ua=Object(jn.a)((function(e){return{root:function(t){return{width:"100%",height:t.sidebarHeight+"px",backgroundColor:e.palette.background.level2}},list:{margin:"auto",width:"95%"}}}));function Ma(e,t,n,r,a){return Object.keys(e).map((function(o){return e[o].map((function(e){return Object(Tn.jsx)(Ha,{expanded:r,handleChangeExpanded:a,isOnMap:t,sensorData:e,sensorType:o,handleRemoveClick:n},e.id)}))}))}var Wa=function(){var e=Object(_n.a)().t,t=Object(Ba.a)().height,n=Ua({sidebarHeight:t-64}),a=Object(r.useState)(!1),o=Object(fn.a)(a,2),i=o[0],c=o[1],u=Object(Nn.useSnackbar)().enqueueSnackbar,d=Object(s.b)();Object(r.useEffect)((function(){d({type:L})}),[]);var l=Object(s.c)((function(e){return e.dbInteraction})),b=l.removeErrorPoints,p=l.removeError,j=Object(s.c)((function(e){return e.mapListCommunication})),O=j.pressedItemId,f=j.mapPointPressed;Object(r.useEffect)((function(){void 0!==p&&b.forEach((function(t){u(e("dashboard:sensor-remove-failed",{id:t}),{variant:"error"}),d(Lt(t))}))}),[p]);var h=Object(s.c)((function(e){return function(e){var t={},n={};for(var r in e)t[r]=e[r].filter((function(e){return void 0!==e.mapPosition&&void 0!==e.mapPosition.x&&void 0!==e.mapPosition.y})),n[r]=e[r].filter((function(e){return void 0===e.mapPosition||void 0===e.mapPosition.x||void 0===e.mapPosition.y}));return{connectedSensors:t,notConnectedSensors:n}}(e.sensor.sensors)})),m=h.connectedSensors,v=h.notConnectedSensors,x=Object(r.useState)(!1),S=Object(fn.a)(x,2),g=S[0],w=S[1],E=function(e){return function(t,n){w(!!n&&e)}};return Object(r.useEffect)((function(){f&&w(!1)}),[f]),Object(Tn.jsxs)(On.a,{item:!0,xs:3,className:n.root,"data-testid":"sensors-list",style:{overflow:"auto"},children:[Object(Tn.jsx)(zn.a,{className:n.list,"data-testid":"not-connected-sensors-list",subheader:!Kn(v)&&Object(Tn.jsx)(aa.a,{disableSticky:!0,className:n.listSubheader,"data-testid":"notConnected-header",children:e("dashboard:sensors-not-placed")}),children:Ma(v,!1,c,g,E)}),Object(Tn.jsx)(zn.a,{className:n.list,"data-testid":"connected-sensors-list",subheader:!Kn(m)&&Object(Tn.jsx)(aa.a,{disableSticky:!0,className:n.listSubheader,"data-testid":"connected-header",children:e("dashboard:sensors-placed")}),children:Ma(m,!0,c,g,E)}),Object(Tn.jsx)(Fa,{"data-testid":"delete-modal-test-id",open:i,handleCancel:function(){c(!1)},handleOk:function(){c(!1),d({type:R,_id:{_id:O}._id}),d(Fr()),E()()},title:e("dashboard:sensor-remove-modal"),content:e("dashboard:sensor-remove-modal-content")})]})},Ga=n(291),Va=Object(jn.a)({root:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}});var Ka=function(){var e=Va();return Object(Tn.jsx)(hn.a,{className:e.root,children:Object(Tn.jsx)(Ga.a,{size:70})})},qa=n(147),Ja=n.n(qa),Xa=Object(jn.a)({root:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},errorMessage:{marginBottom:"1rem",fontSize:"3rem",color:"#333",textAlign:"center"}}),Ya=function(){window.location.reload()};var Za=function(){var e=Xa(),t=Object(_n.a)().t;return Object(Tn.jsxs)(hn.a,{className:e.root,"data-testid":"page-404",children:[Object(Tn.jsx)(mn.a,{component:"h2",children:Object(Tn.jsxs)(hn.a,{className:e.errorMessage,children:[t("something-went-wrong"),"."]})}),Object(Tn.jsx)(Vr.a,{variant:"contained",color:"primary",endIcon:Object(Tn.jsx)(Ja.a,{}),onClick:Ya,children:t("refresh")})]})};var $a=function(){var e=Object(_n.a)().t,t=Object(Nn.useSnackbar)(),n=t.enqueueSnackbar,a=t.closeSnackbar,o=Object(s.c)((function(e){return e.sensor.refreshError}));return Object(r.useEffect)((function(){o?n(e("dashboard:sensors-refresh-error"),{variant:"warning",persist:!0,key:"sensors-refresh-error-snackbar"}):o||a("sensors-refresh-error-snackbar")}),[o]),null},Qa=function(){var e=Object(s.b)();Object(r.useEffect)((function(){e(Ze())}),[]);var t=Object(s.c)((function(e){return e.sensor})),n=t.loadingSensors,a=t.loadingError,o=Object(Tn.jsx)(Ka,{});return n||(o=a?Object(Tn.jsx)(Za,{}):Object(Tn.jsxs)(On.a,{container:!0,maxwidth:"xs","data-testid":"dashboard-content-id",children:[Object(Tn.jsx)($a,{}),Object(Tn.jsx)(ra,{}),Object(Tn.jsx)(Wa,{})]})),Object(Tn.jsx)(Tn.Fragment,{children:o})},eo=Object(jn.a)((function(e){return{title:{margin:e.spacing(2,0)},container:{overflow:"auto",maxHeight:"100%"}}})),to=function(){var e=eo(),t=Object(_n.a)().t,n=Object(s.b)(),o=a.a.useState(0),i=Object(fn.a)(o,2),c=i[0],u=i[1],d=a.a.useState(0),l=Object(fn.a)(d,2),b=l[0],p=l[1],j=a.a.useState(20),O=Object(fn.a)(j,2),f=O[0],h=O[1],m=a.a.useState(""),v=Object(fn.a)(m,2),x=v[0],S=v[1];Object(r.useEffect)((function(){n(Ze())}),[]);var g=Object(s.c)((function(e){return e.notification})),w=g.fetching,E=g.fetchError,y=g.updateError,k=Object(s.c)((function(e){return Cr(e.notification.notifications)})),C=k.uncheckedNotifications,N=k.checkedNotifications,_=Object(s.c)((function(e){return e.sensor})).sensors,T=Object.values(_).flat(),R=function(e){var t,n;return C.length>=e?(t=e,n=0):n=e-(t=C.length),{numberOfUnchecked:t,numberOfChecked:n,displayShowMore:C.length+N.length<=e?"none":"block"}},P=R(f),I=P.numberOfUnchecked,D=P.numberOfChecked,L=P.displayShowMore;Object(r.useEffect)((function(){u(I),p(D),S(L)}),[R]);var A=y&&Object(Tn.jsx)(hn.a,{pt:3,align:"center",children:Object(Tn.jsx)(mn.a,{variant:"overline","data-testid":"something-went-wrong",children:t("something-went-wrong")})})||0===C.length&&Object(Tn.jsx)(hn.a,{pt:3,align:"center",children:Object(Tn.jsx)(mn.a,{variant:"overline","data-testid":"no-new-notifications",children:t("no-new-notifications")})})||Object(Tn.jsx)(yr,{notifications:C.slice(0,c),handleNotificationCheck:function(e,t){("keydown"===t.type&&"Enter"===t.key||"click"===t.type)&&n(Yt(e))},sensors:T}),z=N.length>0&&b>0&&Object(Tn.jsxs)(hn.a,{children:[Object(Tn.jsx)(mn.a,{align:"center",variant:"h6",className:e.title,children:t("inactive")}),Object(Tn.jsx)(An.a,{}),Object(Tn.jsx)(yr,{notifications:N.slice(0,b),sensors:T})]});return Object(Tn.jsx)(On.a,{container:!0,justify:"center",className:e.container,children:E?Object(Tn.jsx)(Za,{}):w?Object(Tn.jsx)(Ka,{}):Object(Tn.jsxs)(On.a,{item:!0,xs:4,children:[Object(Tn.jsx)(mn.a,{align:"center",variant:"h6",className:e.title,children:t("notifications")}),Object(Tn.jsx)(An.a,{}),A,z,Object(Tn.jsx)(hn.a,{pb:3,align:"center",display:x,children:Object(Tn.jsx)(Vr.a,{variant:"outlined",onClick:function(){C.length+N.length<=f&&S("none"),h(f+20)},display:x,children:t("show-more-button")})})]})})},no=n(81),ro=n(113),ao={en:{common:n(148),dashboard:n(149)},pl:{common:n(150),dashboard:n(151)}};ro.a.use(no.e).init({lng:window.localStorage.getItem("language")||navigator.language.slice(0,2),fallbackLng:"en",ns:{namespaces:["common","dashboard"]},defaultNS:"common",resources:ao,react:{useSuspense:!1},interpolation:{escapeValue:!1}});ro.a;var oo=n(266),io=n(66),so=Object(io.a)({palette:{primary:{main:"#3e3e3e"},secondary:{main:"#ffc400"},contrastThreshold:3,background:{default:"#fafafa",paper:"#fff",levelHalf:"#fdfdfd",level1:"#fafafa",level2:"#f6f6f6"}}}),co=function(){return Object(Tn.jsx)(oo.a,{theme:so,children:Object(Tn.jsx)(Br,{children:Object(Tn.jsxs)(u.d,{children:[Object(Tn.jsx)(u.b,{path:"/notifications",component:to}),Object(Tn.jsx)(u.b,{path:"/",exact:!0,component:Qa}),Object(Tn.jsx)(u.a,{to:"/"})]})})})};i.a.render(Object(Tn.jsx)(c.a,{children:Object(Tn.jsx)(s.a,{store:pn,children:Object(Tn.jsx)(u.b,{component:co})})}),document.getElementById("root"))}},[[221,1,2]]]);
//# sourceMappingURL=main.afc0cd27.chunk.js.map